<!DOCTYPE html>
<html>
<head>
    <style>
        /* Делаем контейнер прозрачным, чтобы видеть фон Genially */
        body, html { margin: 0; padding: 0; overflow: hidden; background: transparent; }
        #game-canvas { 
            position: relative; 
            width: 100vw; 
            height: 100vh; 
            background: rgba(0,0,0,0.1); /* Слегка заметен для отладки, потом уберем */
        }
        
        /* Твой герой */
        #hero { 
            position: absolute; 
            width: 50px; height: 50px; 
            background: url('ТВОЯ_ССЫЛКА_НА_ГЕРОЯ') no-repeat center; 
            background-size: contain;
            transition: 0.2s ease-out;
            z-index: 10;
        }

        /* Окно вопроса в стиле джунглей */
        #quiz-box {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 320px; background: #fdf5e6; border: 5px solid #8b4513; border-radius: 15px;
            padding: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.5); z-index: 1000; text-align: center;
        }
        .ans-btn { 
            display: block; width: 100%; margin: 10px 0; padding: 12px; 
            background: #228b22; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold;
        }
    </style>
</head>
<body>

<div id="game-canvas">
    <div id="hero" style="left: 50px; top: 250px;"></div>
    
    <div class="trigger" data-id="gate1" style="position:absolute; left:400px; top:200px; width:60px; height:100px;"></div>
</div>

<div id="quiz-box">
    <h2 id="quest">Where is the verb?</h2>
    <div id="btns"></div>
</div>

<script>
    const config = {
        questions: [
            { q: "He ___ a map in the jungle.", a: ["finded", "found", "founden"], correct: 1 },
            { q: "The dog ___ into the river.", a: ["run", "ran", "runned"], correct: 1 }
        ]
    };

    let pos = { x: 50, y: 250 };
    const hero = document.getElementById('hero');
    const qBox = document.getElementById('quiz-box');

    // Управление кликами (для мобилок и простоты)
    document.addEventListener('keydown', (e) => {
        if(qBox.style.display === 'block') return;

        if(e.key === 'ArrowRight') pos.x += 30;
        if(e.key === 'ArrowLeft') pos.x -= 30;
        if(e.key === 'ArrowUp') pos.y -= 30;
        if(e.key === 'ArrowDown') pos.y += 30;

        updatePosition();
        checkTriggers();
    });

    function updatePosition() {
        hero.style.left = pos.x + 'px';
        hero.style.top = pos.y + 'px';
    }

    function checkTriggers() {
        const triggers = document.querySelectorAll('.trigger');
        triggers.forEach(t => {
            const hRect = hero.getBoundingClientRect();
            const tRect = t.getBoundingClientRect();

            if (!(hRect.right < tRect.left || hRect.left > tRect.right || 
                  hRect.bottom < tRect.top || hRect.top > tRect.bottom)) {
                showQuiz(t);
            }
        });
    }

    function showQuiz(triggerElement) {
        const qData = config.questions[Math.floor(Math.random()*config.questions.length)];
        document.getElementById('quest').innerText = qData.q;
        const btnCont = document.getElementById('btns');
        btnCont.innerHTML = '';
        
        qData.a.forEach((ans, i) => {
            const b = document.createElement('button');
            b.className = 'ans-btn';
            b.innerText = ans;
            b.onclick = () => {
                if(i === qData.correct) {
                    qBox.style.display = 'none';
                    triggerElement.remove(); // Убираем преграду
                } else {
                    alert("Oh no! Try again!");
                    pos.x -= 50; // Отбрасываем назад
                    updatePosition();
                    qBox.style.display = 'none';
                }
            };
            btnCont.appendChild(b);
        });
        qBox.style.display = 'block';
    }
</script>
</body>
</html>
